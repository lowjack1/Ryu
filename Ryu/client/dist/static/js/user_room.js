"use strict";var url="ws://".concat(location.host,"/websocket"),ws=new WebSocket(url);function sendMessage(){var e=$('input[name="msg_input"]'),n=e.val().trim(),s={user_id:parseInt($('input[name="user_id"]').val()),username:$('input[name="username"]').val(),room:$('input[name="userroom"]').val(),message:n};return ws.send(JSON.stringify(s)),e.val(""),!1}function updateMessages(e,t){var r;t==e.user_id&&(console.log(e.messages),r="",$.each(e.messages,function(e,n){var s=n[0],a=n[1],c=n[2];r+='\n            <div class="card msg-width '.concat(s==t?"sent-msg":"",'">\n                <div class="card-header bg-primary">\n                    ').concat(a,'\n                </div>\n                <div class="card-body">\n                    ').concat(c,"\n                </div>\n            </div>")}),$(".chat").append(r),$(".chat").animate({scrollTop:$(".chat").prop("scrollHeight")},500))}function removeUser(e){var n=e.username,s=e.user_id;$(".".concat(n,"-").concat(s)).remove()}function showNewUserJoined(e){var c="";$.each(e.usernames,function(e,n){var s=n[0],a=n[1];c+='\n            <div class="col-12 text-center mb-2 '.concat(a,"-").concat(s,'">\n                <span class="user-label">').concat(a,"</span>\n            </div>")}),$(".new-user-div").html(c)}function showCurrentMessage(e,n){var s='\n        <div class="card msg-width '.concat(e.user_id==n?"sent-msg":"",'">\n            <div class="card-header bg-primary">\n                ').concat(e.username,'\n            </div>\n            <div class="card-body">\n                ').concat(e.message,"\n            </div>\n        </div>");$(".chat").append(s),$(".chat").animate({scrollTop:$(".chat").prop("scrollHeight")},500)}ws.onmessage=function(e){var n=JSON.parse(e.data),s=$('input[name="user_id"]').val();"new_user_joined"in n?(showNewUserJoined(n),updateMessages(n,s)):"user_left"in n?removeUser(n):showCurrentMessage(n,s)},$('button[name="msg_sent_btn"').on("click",sendMessage),$('input[name="msg_input"]').on("keyup",function(e){13==e.keyCode&&sendMessage()});